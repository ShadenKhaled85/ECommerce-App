<section class="min-h-screen bg-white">
  <!-- ? Wishlist Header -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-2xl sm:text-3xl font-bold text-blue-900">My Wishlist</h1>
        <p class="text-sm text-blue-700/70 mt-1">Save items you love and add them to cart anytime.</p>
      </div>

      <div class="flex items-center gap-3">
        <a routerLink="/cart"
          class="cursor-pointer inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 shadow-sm transition">
          <i class="fa-solid fa-cart-shopping"></i>
          Go to Cart
        </a>
      </div>
    </div>
  </div>

  <!-- ? Wishlist Content -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">

      <!-- ? Card -->
      @for (product of wishlistProducts; track product._id) {
      <article
        class="group relative bg-white rounded-2xl border border-blue-100 shadow-sm hover:shadow-md transition overflow-hidden">
        <button
          class="absolute top-3 right-3 h-9 w-9 grid place-items-center rounded-full bg-white/90 border border-blue-100 shadow-sm hover:shadow transition">
          <i class="fa-solid fa-heart text-red-600 group-hover:scale-110 transition"></i>
        </button>

        <!-- ? Image -->
        <div class="p-4 grid place-items-center bg-white">
          <img [src]="product.imageCover" [alt]="product.title"
            class="h-44 object-contain group-hover:scale-105 transition" />
        </div>

        <!-- ? Info -->
        <div class="px-5 pb-5">
          <span class="inline-block text-xs font-semibold text-blue-700 bg-blue-50 rounded-full px-3 py-1">
            {{product.category.name}}
          </span>
          <h3 class="mt-2 font-semibold text-blue-900 line-clamp-2">
            {{ product.title.split(' ', 4).join(' ') }}
          </h3>

          <div class="mt-3 flex items-center justify-between">
            <div>
              <div class="flex items-center gap-1 text-sm">
                <i class="fa-solid fa-star text-yellow-400"></i>
                <span class="text-blue-900/80"> {{product.ratingsAverage}} </span>
              </div>
              <div class="mt-1 text-lg font-bold text-blue-900"> {{product.price}} EGP </div>
            </div>

            <div class="text-right">
              <div class="text-xs text-blue-700/70">In stock</div>
              <div class="mt-1 text-xs text-blue-700/70">Ships in 2-3 days</div>
            </div>
          </div>

          <!-- ? Actions -->
          <div class="mt-5 flex items-center gap-3">
            <button (click)="addProductToCart(product._id)"
              class="cursor-pointer flex-1 py-2.5 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700 shadow-sm transition">
              Add to Cart
            </button>
            <button (click)="removeProductFromWishlist(product._id)"
              class="cursor-pointer px-4 py-2 rounded-xl border border-blue-200 text-blue-800 hover:bg-blue-50 transition">
              Remove
            </button>
          </div>
        </div>
      </article>
      }

      @empty {
      <div class="rounded-2xl border border-blue-100 bg-blue-50/50 p-10 text-center mt-10 col-span-full">
        <div class="mx-auto h-14 w-14 grid place-items-center rounded-full bg-white border border-blue-100 shadow-sm">
          <i class="fa-regular fa-heart text-blue-600 text-xl"></i>
        </div>
        <h3 class="mt-4 text-xl font-semibold text-blue-900">Your wishlist is empty</h3>
        <p class="mt-1 text-blue-700/70">Browse products and tap the heart to save them here.</p>
        <a routerLink="/products"
          class="inline-flex items-center gap-2 mt-6 px-5 py-2.5 rounded-xl bg-blue-600 text-white hover:bg-blue-700 shadow-sm transition">
          <i class="fa-solid fa-magnifying-glass"></i>
          Start Shopping
        </a>
      </div>
      }

    </div>
  </div>
</section>