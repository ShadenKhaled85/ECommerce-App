<section class="cart-content">
  @if (cartItems.totalCartPrice) {
  <div class="space-y-8">

    <!-- ? Clear Cart & Total -->
    <div class="flex items-center justify-between bg-white p-5 rounded-xl shadow-sm border border-gray-200">
      <h3 class="text-lg font-bold text-gray-800">
        Total Cart: <span class="text-blue-700">{{ cartItems.totalCartPrice }} EGP</span>
      </h3>
      <button (click)="clearUserCart()"
        class="cursor-pointer px-5 py-2 rounded-lg bg-red-500 text-white font-semibold shadow-sm hover:bg-red-600 transition">
        Clear Cart
      </button>
    </div>

    <!-- ? Cart Items -->
    @for (prod of cartItems.products; track prod.product._id) {
    <div
      class="flex items-center justify-between p-5 border border-gray-200 rounded-xl shadow-sm bg-white hover:shadow-md transition">

      <!-- ? Product Image -->
      <div class="flex items-center gap-6">
        <div class="w-28 h-28 flex items-center justify-center bg-gray-50 rounded-lg border">
          <img [src]="prod.product.imageCover" alt="Product Image" class="w-24 h-24 object-contain" />
        </div>

        <!-- ? Product Info -->
        <div class="flex flex-col">
          <h2 class="text-lg font-semibold text-gray-800 leading-tight">
            {{ prod.product.title }}
          </h2>
          <p class="text-xl font-bold text-blue-700">{{ prod.price }} EGP</p>

          <!--? Remove Button -->
          <button (click)="removeCartItem(prod.product._id)"
            class="mt-3 flex items-center gap-2 px-4 py-2 rounded-lg bg-red-500 text-white text-sm font-medium shadow-sm hover:bg-red-600 transition w-fit cursor-pointer">
            <i class="fa-solid fa-trash"></i> Remove
          </button>
        </div>
      </div>

      <!-- ? Quantity Controls -->
      <div class="flex items-center gap-4">
        <button (click)="updateCartItemQuantity(prod.product._id , prod.count-1)"
          class="cursor-pointer w-10 h-10 flex items-center justify-center rounded-full bg-red-100 text-red-600 font-bold hover:bg-red-200 transition">
          -
        </button>
        <span class="text-lg font-medium w-8 text-center">{{ prod.count }}</span>
        <button (click)="updateCartItemQuantity(prod.product._id , prod.count+1)"
          class="cursor-pointer w-10 h-10 flex items-center justify-center rounded-full bg-green-100 text-green-600 font-bold hover:bg-green-200 transition">
          +
        </button>
      </div>
    </div>
    }

    <!-- ? Payment Button -->
    <div class="flex justify-end">
      <button [routerLink]="['/checkout' , cartItems._id]"
        class="cursor-pointer px-6 py-3 rounded-lg bg-blue-500 text-white font-semibold shadow-md hover:bg-blue-600 transition">
        Proceed to Payment
      </button>
    </div>

  </div>
  }

  @else {
  <div
    class="flex flex-col items-center justify-center py-20 space-y-6 bg-white rounded-xl shadow-sm border border-gray-200">
    <img src="/images/empty-cart.png" alt="Empty Cart" class="w-40 h-40 object-contain" />
    <h2 class="text-2xl font-semibold text-gray-700">Your Cart is Empty</h2>
    <p class="text-gray-500 text-center max-w-md">
      Looks like you haven't added anything yet. Browse our products and find something you love!
    </p>
    <a routerLink="/products"
      class="cursor-pointer px-6 py-3 rounded-lg bg-blue-500 text-white font-semibold shadow-md hover:bg-blue-600 transition">
      Start Shopping
    </a>
  </div>
  }

</section>
